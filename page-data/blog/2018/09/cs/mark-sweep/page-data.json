{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/2018/09/cs/mark-sweep/","result":{"data":{"site":{"siteMetadata":{"siteUrl":"https://dannypsnl.github.io"}},"markdownRemark":{"html":"<p>Mark-Sweep is a classic GC algorithm, it's combined with two parts, <code class=\"language-text\">mark</code> and <code class=\"language-text\">sweep</code>.</p>\n<p>Mark pseudo code would like:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">mark(root):\n    if !root.is_marked:\n        root.is_marked = true\n    for obj in root.knowns:\n        mark(obj)</code></pre></div>\n<p>And Sweep pseudo code would like:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sweep(heap):\n    for obj in heap:\n        if obj.is_marked:\n            obj.is_marked = false\n        else:\n            release(obj)</code></pre></div>\n<p>Let's use some graphs to show it(<code class=\"language-text\">-&gt;</code> means known):</p>\n<p>Start:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">root -&gt; obj1 -&gt; obj2\n         |\n          \\-&gt; obj3</code></pre></div>\n<p>If we run <code class=\"language-text\">collection</code>(mark-sweep), then since each object is reachable from <code class=\"language-text\">root</code>, so no one would be released.</p>\n<p>After running a function, <code class=\"language-text\">obj1</code> don't need <code class=\"language-text\">obj3</code> anymore, so it became:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">root -&gt; obj1 -&gt; obj2\n\nobj3</code></pre></div>\n<p>Now when we run <code class=\"language-text\">collection</code>, <code class=\"language-text\">obj3</code> is unreachable from <code class=\"language-text\">root</code>, so it won't be marked! When running to <code class=\"language-text\">sweep</code>, it will be dropped.</p>","frontmatter":{"title":"Mark Sweep GC","categories":["cs"],"tags":["gc"]}}},"pageContext":{"slug":"/blog/2018/09/cs/mark-sweep/"}}}